

<div class="background-image">

  <form class="col-sm-9 col-md-10 col-lg-10 mx-auto card-body custom-card-body">
   
    <!-- Title -->
    <div class="form-group">
      <label for="title">Título</label>
      <input type="text" class="form-control" id="title" name="title" placeholder="Título" [(ngModel)]="projectFrom.title" >
    </div>

    <!-- Description -->
    <div class="form-group">
      <label for="description">Descripción</label>
      <textarea type="text" class="form-control" id="description" name="description" placeholder="Descripción" [(ngModel)]="projectFrom.description"></textarea>
    </div>

    <!-- Keywords -->
    <div class="form-group">
      <label for="keywords">Palabras clave</label>
      <input type="text" class="form-control" id="keywords" name="keywords" placeholder="Meteorología; Temperatura; Madrid; Parque del Retiro"
      [(ngModel)]="projectFrom.keywords">
    </div>

    <!-- Dirección -->
    <div class="form-group">
      <label for="userGroup">Dirección del proyecto</label>
      <input type="text" class="form-control" id="userGroup" name="userGroup" 
             placeholder="Calle de Alan Turing, s/n, 28031, Madrid" [(ngModel)]="projectFrom.location">
    </div>

    <!-- Coordenadas -->
    <div class="form-row">
      <div class="form-group col-8">
        <label for="userGroup">Coordenadas</label>
        <input type="text" class="form-control" id="userGroup" name="userGroup" 
               placeholder="40.3895, -3.6270" >
      </div>
      <div class="form-group col-4">
        <a type="button" class="btn-floating light-blue" style="font-size: 30px;" data-toggle="modal"
           data-target="#mapModal" title="Ver localizacion en el mapa">
          <i class="bi bi-map"></i>
        </a>
      </div>
    </div>
    

    <hr>

    <a type="button" class="btn-floating light-blue create-buttom" title="Crear nuevo proyecto"
       data-toggle="modal" data-target="#sensorModal">
      <i class="bi bi-plus-square"></i> Añadir sensor
    </a>

    <table class="table table-striped" *ngIf="projectFrom.sensors">
      <thead>
          <tr>
              <th scope="col"></th>
              <th scope="col">Nombre del sensor</th>
              <th scope="col">Tipo de sensor</th>
              <th scope="col">Acciones</th>
          </tr>
      </thead>
      <tbody>
          <tr *ngFor="let sensor of projectFrom.sensors; let i = index">
              <th scope="row">{{i}}</th>
              <td>{{sensor.name}}</td>
              <td>{{getSensorTypeById(sensor.sensorTypeId).name}}</td>
              <td>
                  <a role="button" class="btn btn-outline-dark"><i class="bi bi-trash"></i></a>
              </td>
          </tr>
      </tbody>
    </table>

    <hr>

    <div class="input-group mb-3">
      <div class="input-group-prepend">
        <span class="input-group-text" id="inputGroupFileAddon01">Añadir datos</span>
      </div>
      <div class="custom-file">
        <input type="file" accept=".csv" class="custom-file-input" id="uploadCsv" aria-describedby="inputGroupFileAddon01" (change)="fileChange($event)">
        <label class="custom-file-label" for="uploadCsv">{{csvFile?csvFile.name:"Seleccione un fichero"}}</label>
      </div>
    </div>

    <hr>

    <div class="row">
        <button type="submit" class="btn btn-secondary" (click)="cancelProject()">Cancelar</button>
        <button type="submit" class="btn btn-primary offset-1" (click)="createProject()">Guardar</button>
    </div>
    
  </form>

  
  









  <div class="modal fade" id="mapModal" tabindex="-1" role="dialog" aria-labelledby="mapModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="mapModalLabel">Ubicación del sensor</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
              <!-- <app-leaflet-map></app-leaflet-map> -->
            </div>
        </div>
    </div>
  </div>


  <div class="modal fade" id="sensorModal" tabindex="-1" role="dialog" aria-labelledby="sensorModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="sensorModalLabel">Añadir sensor</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>

            <div class="modal-body">
              <form>
                <!-- Name -->
                <div class="form-group">
                  <label for="title">Nombre del sensor</label>
                  <input type="text" class="form-control" id="title" name="title" placeholder="Título" [(ngModel)]="auxSensor.name" >
                </div>
            
                <!-- Type -->
                <div class="form-group">
                  <label for="description">Tipo de sensor</label>
                  <select class="custom-select" id="sensorType" name="sensorType" [(ngModel)]="auxSensor.sensorTypeId">
                    <option value="0"selected>Selecciona un tipo de sensor</option>
                    <option [value]="sensorType.id" *ngFor="let sensorType of sensorTypesMasterTable" [title]="sensorType.description">{{sensorType.name}}</option>
                  </select>
                </div>
              </form>
            </div>

            <div class="modal-footer">
              <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="addSensor()">Añadir</button>
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>

        </div>
    </div>
  </div>


</div>

